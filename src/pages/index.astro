---
import HomeLayout from "../layouts/home-layout.astro";
import HomeHeader from "../components/home/home-header.astro";
import HomeSections from "../components/home/home-sections.astro";
import { useStrapi } from "../api/strapi";
import { getImageUrlFromFormat } from "../lib/strapi-utils";

const { getHome } = useStrapi();
const home = await getHome();
---

<HomeLayout
  title={home.data.attributes.seo_title}
  cover={getImageUrlFromFormat(
    home.data.attributes.thumbnail.data.attributes,
    "thumbnail"
  )}
  description={home.data.attributes.seo_description}
>
  <div class="fixed h-screen w-full top-0">
    <HomeHeader photos={home.data.attributes.photos.data} />
  </div>
  <HomeSections sections={home.data.attributes.sections.data} />
</HomeLayout>
