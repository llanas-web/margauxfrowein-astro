---
import Layout from "../layouts/Layout.astro";
import HomeHeader from "../components/home/home-header.astro";
import qs from "qs";
import { Debug } from "astro:components";

const sqString = qs.stringify({
  populate: {
    photos: {
      populate: "image.formats",
    },
    sections: {
      populate: ["images"],
    },
  },
});
const request = new Request(
  `${import.meta.env.STRAPI_URL}/api/home?${sqString}`
);
const response = await fetch(request, {
  method: "GET",
});
const home = await response.json();
const testEnv = import.meta.env.PROD;
---

<Layout title="Margaux Frowein ðŸ“·">
  <Debug testEnv={testEnv} />
  <HomeHeader photos={home.data.attributes.photos.data} />
</Layout>
